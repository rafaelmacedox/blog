<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>üê≥ Docker: Guia r√°pido para desenvolvedores - Rafael Macedo</title><meta name=description content="Um bom tempo (quase 2 anos hahaha) trabalhei com Docker sem nunca ter simplesmente parado para realmente ver a documenta√ß√£o ou algum curso, e depois de tanto passar sufoco por simplesmente n√£o saber realmente como tudo funcionava, resolvi fazer um curso completo somente sobre Docker. E hoje, algo meio como um bloco de anota√ß√µes, vou repassar para voc√™ apenas o que eu considero mais importante e √∫til para a nossa produtividade durante o dia a dia de trabalho como DESENVOLVEDOR."><meta name=author content="Rafael Macedo"><link rel="preload stylesheet" as=style href=https://rafamacedo.dev/app.min.css><link rel="preload stylesheet" as=style href=https://rafamacedo.dev/an-old-hope.min.css><script defer src=https://rafamacedo.dev/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://rafamacedo.dev/theme.png><link rel=preload as=image href=https://rafamacedo.dev/twitter.svg><link rel=preload as=image href=https://rafamacedo.dev/github.svg><link rel=preload as=image href=https://rafamacedo.dev/instagram.svg><link rel=icon href=https://rafamacedo.dev/favicon.ico><link rel=apple-touch-icon href=https://rafamacedo.dev/apple-touch-icon.png><meta name=generator content="Hugo 0.99.1"><meta property="og:title" content="üê≥ Docker: Guia r√°pido para desenvolvedores"><meta property="og:description" content="Algumas dicas retiradas de anota√ß√µes pessoais realizadas ap√≥s um curso sobre Docker para Desenvolvedores"><meta property="og:type" content="article"><meta property="og:url" content="https://rafamacedo.dev/artigos/docker-guia-rapido-para-desenvolvedores/"><meta property="article:section" content="artigos"><meta property="article:published_time" content="2022-05-25T23:34:47-03:00"><meta property="article:modified_time" content="2022-05-25T23:34:47-03:00"><meta itemprop=name content="üê≥ Docker: Guia r√°pido para desenvolvedores"><meta itemprop=description content="Algumas dicas retiradas de anota√ß√µes pessoais realizadas ap√≥s um curso sobre Docker para Desenvolvedores"><meta itemprop=datePublished content="2022-05-25T23:34:47-03:00"><meta itemprop=dateModified content="2022-05-25T23:34:47-03:00"><meta itemprop=wordCount content="1354"><meta itemprop=keywords content="docker,"><meta name=twitter:card content="summary"><meta name=twitter:title content="üê≥ Docker: Guia r√°pido para desenvolvedores"><meta name=twitter:description content="Algumas dicas retiradas de anota√ß√µes pessoais realizadas ap√≥s um curso sobre Docker para Desenvolvedores"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=https://rafamacedo.dev>Rafael Macedo</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=/sobre/>Sobre</a>
<a href=/projetos/>Projetos</a>
<a href=/biblioteca/>Biblioteca</a></nav><nav class=social><a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/manodoscodigos target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/rafaelmacedox target=_blank></a>
<a class=instagram style=--url:url(./instagram.svg) href=https://instagram.com/orafa.macedo target=_blank></a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>May 25, 2022</time>
<span>Rafael Macedo</span></p><h1>üê≥ Docker: Guia r√°pido para desenvolvedores</h1></header><section class=post-content><p>Um bom tempo (quase 2 anos hahaha) trabalhei com Docker sem nunca ter simplesmente parado para realmente ver a documenta√ß√£o ou algum curso, e depois de tanto passar sufoco por simplesmente n√£o saber realmente como tudo funcionava, resolvi fazer um curso completo somente sobre Docker. E hoje, algo meio como um bloco de anota√ß√µes, vou repassar para voc√™ apenas o que eu considero mais importante e √∫til para a nossa produtividade durante o dia a dia de trabalho como DESENVOLVEDOR.</p><p>Importante ressaltar que √© para DEVS, por que caso voc√™ seja da √°rea de DevOps, obviamente voc√™ precisar√° ter mais embasamento sobre o que estar√° sendo dito aqui.</p><p>¬†</p><h2 id=ambiente>Ambiente</h2><p>Primeiramente √© muito importante ressaltar que o Docker √© basicamente um PROCESSO e foi criado utilizando os recursos do Linux, como os namespaces, cgroups e file system.</p><ul><li>Namespaces s√£o a forma de isolar processos de um sistema operacional, e basicamente um container √© um processo isolado com diversos processos filhos.</li><li>Cgroups servem para controlar os recursos operacionais do container, como memoria e cpu, de forma que n√£o interfira nos demais recursos da sua m√°quina (Docker Host).</li></ul><p><img src=/images/kernel-cgroups-namespaces.jpg alt="Docker Cgroup and namespaces"></p><ul><li>File System ou OFS (Overlay File System) ajuda o Docker a funcionar em camadas, onde √© poss√≠vel pegar apenas a diferen√ßa do que foi alterado e assim n√£o precisando fazer diversas c√≥pias INTEIRAS das coisas.</li></ul><p>Ent√£o, muito importante lembrar que caso voc√™ esteja no Windows e utilizando o Docker Desktop puramente, saiba que voc√™ n√£o estar√° desenvolvendo com 100% da performance que poderia, pois basicamente o Docker Desktop esta virtualizando um SO Linux para utilizar como Docker Host. Por isso √© muito bacana, caso esteja desenvolvendo no Windows, utilizar o WSL2 para desfrutar de todos os recursos e performance que o Docker oferece. (Em breve vou fazer um artigo sobre o WSL2 tamb√©m)</p><p>¬†</p><h2 id=vis√£o-geral>Vis√£o Geral</h2><p>Em uma vis√£o geral, o Docker √© composto pelas seguintes partes:</p><p><img src=/images/docker-overview.png alt="Docker Overview"></p><ul><li>Docker Host (O seu computador em s√≠ e onde encontra-se os containers)</li><li>Client (O terminal do seu computador que enviar√° os comandos)</li><li>Registry (Reposit√≥rio de imagens para Docker, por exemplo o DockerHub.com)</li></ul><p>¬†</p><h2 id=primeiros-passos>Primeiros passos</h2><p>A primeira coisa a entender √© que todo container √© criado a partir de uma IMAGEM, essa imagem pode ser um ubuntu, nginx, nodejs, postgresql ou qualquer outra coisa que voc√™ encontrar no reposit√≥rio de imagens.</p><p>Use: <code>docker run nginx</code></p><ul><li>Cria e inicia um container utilizando a imagem nginx e trava o terminal no processo</li></ul><p>Use: <code>docker run -d nginx</code> (Dispatch)</p><ul><li>Cria, inicia um container utilizando a imagem nginx e libera o terminal</li></ul><p>Use: <code>docker ps</code></p><ul><li>Lista todos os containers RODANDO</li></ul><p><strong>Interessante olharmos que o container est√° rodando, possu√≠ um CONTAINER ID e um CONTAINER NAME (isso ser√° √∫til posteriormente)</strong></p><p>Use <code>docker run --name webserver nginx</code></p><ul><li>Cria, inicia um container utilizando o NGINX e o nomeia como &lsquo;webserver&rsquo;</li></ul><p>Use <code>docker stop webserver</code></p><ul><li>Finaliza um container</li></ul><p>Use <code>docker rm webserver</code></p><ul><li>Exclu√≠ um container</li></ul><p>Use: <code>docker ps -a</code></p><ul><li>Lista todos os containers EXISTENTES</li></ul><p>Use <code>docker run --rm nginx</code></p><ul><li>Cria, inicia um container utilizando o nginx e o destr√≥i assim que o processo for finalizado</li></ul><p>Use <code>docker run -it ubuntu bash</code></p><ul><li>Cria, inicia um container utilizando o UBUNTU e acesso o sheel do container.</li><li>&lsquo;-i (Modo interativo, STDIN ativo, para permitir nossa intera√ß√£o com o container )&rsquo;</li><li>&lsquo;-t (TTY √© simplesmente um terminal ao qual voc√™ est√° conectado. Uma interface da qual voc√™ pode dar comandos texto a maquina)&rsquo;</li><li>&lsquo;bash (Meio autoexplicativo, vai abrir o sheel Bash)</li></ul><p><strong>Tamb√©m √© poss√≠vel acessar o container como dito acima, por√©m em containers j√° ativos.
Use <code>docker exec -it nginx bash</code></strong></p><p>¬†</p><h3 id=redes>Redes</h3><p>O Docker funciona com diversos tipos de redes, sendo eles:</p><ul><li>bridge (Um container fala com o outro) (Padr√£o)</li><li>host (Mescla o docker com o host)</li><li>overlay (N√£o muito usado) (Se tiver v√°rios dockers em m√°quinas diferentes)</li><li>maclan (Sinceramente n√£o lembro)</li><li>none (N√£o tem rede, √© s√≥ o container isolado)</li></ul><p>Ter rede configurada √© super importante para manter a comunica√ß√£o correta entre os containers.</p><p>Use: <code>docker network ls</code></p><ul><li>Lista todas as redes existentes e seu respectivo driver (tipo).</li></ul><p>Use: <code>docker network create --driver bridge minharede</code></p><ul><li>Cria uma rede com o nome &lsquo;minharede&rsquo; e o tipo &lsquo;bridge&rsquo;, ou seja, todos os containers que estiverem nesta rede ir√£o poder se comunicar.</li></ul><p>Use: <code>docker run --network minharede nginx</code></p><ul><li>Cria um container conectado na rede com o nome &lsquo;minharede&rsquo;</li></ul><p>Use <code>docker network connect minharede meucontainer</code></p><ul><li>Conecta o container com o nome &lsquo;meucontainer&rsquo; na rede com o nome &lsquo;minharede&rsquo;</li></ul><p>Use <code>docker network desconnect minharede meucontainer</code></p><ul><li>Desconecta o container com o nome &lsquo;meucontainer&rsquo; da rede com o nome &lsquo;minharede&rsquo;</li></ul><p>Use: <code>docker network rm minharede</code></p><ul><li>Deleta a rede com o nome &lsquo;minharede&rsquo;. Note que caso algum container estiver conectado nesta rede n√£o ser√° poss√≠vel executar este comando. Sendo necess√°rio desconectar o container da rede ou delet√°-lo.</li></ul><p>Beleza, mas comigo sempre foi comum acontecer algo assim por exemplo: Eu iniciava um container postgresql <code>docker run -d postgresql</code> que por padr√£o utiliza a porta &lsquo;5432&rsquo; por padr√£o, por√©m ao tentar conectar em um software como o Dbeaver, simplesmente eu n√£o conseguia conectar em &rsquo;localhost:5432&rsquo;.</p><p>Mas porque? Lembra que acabamos de falar que por padr√£o o docker cria containers na rede tipo &lsquo;bridge&rsquo;, ou seja, que n√£o compartilha portas com o docker host (sua m√°quina). Ent√£o, poder√≠amos criar o container em uma rede do tipo &lsquo;host&rsquo;, que comunica diretamente com nossa maquina. Por√©m isso pode n√£o ser a melhor op√ß√£o em alguns casos por que caso voc√™ precise conectar outro container no seu postgresql esse container n√£o enxergaria a porta por estar em outra rede.</p><p>Por isso possu√≠mos a op√ß√£o de expor uma porta diretamente ao criar o container.</p><p>Use: <code>docker run -p 8080:80 nginx</code></p><ul><li>Basicamente estamos dizendo que queremos expor a porta 80 DO NGINX na porta 8080 da minha MAQUINA.</li></ul><p>Beleza! E agora se precisarmos acessar de DENTRO DO CONTAINER um servi√ßo que est√° DENTRO DA NOSSA M√ÅQUINA, como por exemplo, um container NODEJS conectar em um MYSQL que est√° rodando em nosso windows? Simples! No nodejs basta usar o &lsquo;<a href=http://host.docker.internal:3306>http://host.docker.internal:3306</a>&rsquo; (no caso o 3306 √© a porta padr√£o do mysql)</p><p>¬†</p><h3 id=bind-mounts>Bind Mounts</h3><p>Vale relembrar que cada container √© baseado em uma imagem IMUT√ÅVEL. Ou seja, n√£o modificamos ela, ent√£o todas as vezes que o container √© finalizado tudo que fizemos dentro dele √© perdido, e pra que isso n√£o aconte√ßa temos a op√ß√£o de interligar uma pasta do Docker Host no container.</p><p>Use: <code>docker run -v source/:/usr/share/nginx/html nginx</code></p><ul><li>Basicamente estamos fazendo um bind da pasta local chamada &lsquo;SOURCE&rsquo; para dentro do container na pasta &lsquo;HTML&rsquo; do nginx.</li></ul><p>Com isso tudo que for alterado na pasta &lsquo;html&rsquo; dentro do container estar√° tamb√©m na pasta &lsquo;source&rsquo; da nossa m√°quina.
<strong>Mesmo que a pasta source ou a pasta html n√£o existam, o docker ir√° cri√°-las.</strong></p><p>¬†</p><h3 id=volumes>Volumes</h3><p>Caso seja necess√°rio utilizar uma MESMA PASTA do Docker Host em DIVERSOS containers, podemos criar VOLUMES e utiliz√°-los em qualquer container.</p><p>Use: <code>docker volume ls</code></p><ul><li>Lista todos os volumes j√° criados</li></ul><p>Use: <code>docker volume create MEUVOLUME</code></p><ul><li>Ir√° criar um novo volume</li></ul><p>Use: <code>docker run --mount type=VOLUME,source=MEUVOLUME,target=/usr/share/nginx/html nginx</code></p><ul><li>Ir√° mapear o volume chamado MEUVOLUME para dentro da pasta HTML do container nginx, e podemos subir quantos containers nginx quisermos utilizando exatamente o mesmo conte√∫do.</li></ul><p><strong>Importante para Windows</strong></p><p>¬†
Os volumes criados com o &lsquo;wsl2&rsquo; ir√£o ficar dentro do seguinte caminho:
<code>\\wsl$\docker-desktop-data\version-pack-data\community\docker\volumes\</code></p><p>¬†</p><h3 id=imagens-e-registries>Imagens e Registries</h3><p><img src=/images/docker-images.jpg alt="Docker Images"></p><p>As imagens s√£o puxadas do DockerHub por padr√£o, mas as empresas podem ter seus pr√≥prios reposit√≥rios de imagens docker privado, como por exemplo o Nexus3.</p><p>Use: <code>docker pull ubuntu</code></p><ul><li>Somente baixa uma imagem do ubuntu no Docker Host, mas sem iniciar um container.</li></ul><p>Use: <code>docker images</code></p><ul><li>Lista todas as imagens j√° baixadas.</li></ul><p>Use: <code>docker rmi ubuntu</code></p><ul><li>Ir√° excluir a imagem do Docker Host (sua m√°quina)</li></ul><p>¬†</p><h1 id=conclus√£o>Conclus√£o</h1><p>Ent√£o vamos parando por aqui, pois j√° vimos dicas essenciais para que um DEV consiga utilizar Docker no seu dia a dia.</p><p>Ressaltando que o assunto de imagens Docker √© muito mais extenso que imaginamos, e com as possibilidades de criarmos nossas pr√≥prias imagens com o DockerFile, Docker Composes, utiliza√ß√£o em esteiras de CI/CD e diversas outras utilidades, o assunto imagens necessita de um artigo apenas sobre isso. O qual pretendo fazer em breve.</p><p>Um grande abra√ßo e at√© a pr√≥xima!</p></section><footer class=post-tags><a href=https://rafamacedo.dev/tags/docker>docker</a></footer><nav class=post-nav><a class=next href=https://rafamacedo.dev/artigos/ola-mundo/><span>üéâ Ol√° Mundo</span><span>‚Üí</span></a></nav></article></main><footer class=footer><p>&copy; 2022 <a href=https://rafamacedo.dev>Rafael Macedo</a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>HugoÔ∏èÔ∏è</a>Ô∏è</p><p><a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a></p></footer></body></html>